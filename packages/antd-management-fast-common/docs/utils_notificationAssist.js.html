<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>utils/notificationAssist.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css" />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css" />
    <script src="scripts/nav.js" defer></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger" class="navicon-button x">
      <div class="navicon"></div>
    </label>

    <label for="nav-trigger" class="overlay"></label>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Global</h3>
      <ul>
        <li>
          <a href="global.html#FormatMessageWrapper">FormatMessageWrapper</a>
        </li>
        <li>
          <a href="global.html#InteractionAssemble">InteractionAssemble</a>
        </li>
        <li><a href="global.html#TranslateLocale">TranslateLocale</a></li>
        <li><a href="global.html#actionCore">actionCore</a></li>
        <li><a href="global.html#animalType">animalType</a></li>
        <li><a href="global.html#apiRequest">apiRequest</a></li>
        <li><a href="global.html#apiSuccessCode">apiSuccessCode</a></li>
        <li><a href="global.html#appInitDefault">appInitDefault</a></li>
        <li>
          <a href="global.html#authenticationFailCode"
            >authenticationFailCode</a
          >
        </li>
        <li>
          <a href="global.html#buildRandomHexColor">buildRandomHexColor</a>
        </li>
        <li><a href="global.html#cardConfig">cardConfig</a></li>
        <li><a href="global.html#confirmActionCore">confirmActionCore</a></li>
        <li><a href="global.html#copyToClipboard">copyToClipboard</a></li>
        <li><a href="global.html#destroyMessage">destroyMessage</a></li>
        <li><a href="global.html#emptyLogic">emptyLogic</a></li>
        <li><a href="global.html#emptyLogo">emptyLogo</a></li>
        <li><a href="global.html#extraBuildType">extraBuildType</a></li>
        <li><a href="global.html#filterUpdateModel">filterUpdateModel</a></li>
        <li><a href="global.html#flushLocalStorage">flushLocalStorage</a></li>
        <li>
          <a href="global.html#flushSessionStorage">flushSessionStorage</a>
        </li>
        <li><a href="global.html#formatMessage">formatMessage</a></li>
        <li>
          <a href="global.html#getAuthorityFromRouter"
            >getAuthorityFromRouter</a
          >
        </li>
        <li><a href="global.html#getCorsDomain">getCorsDomain</a></li>
        <li>
          <a href="global.html#getDerivedStateFromPropertiesForUrlParameters"
            >getDerivedStateFromPropertiesForUrlParameters</a
          >
        </li>
        <li>
          <a
            href="global.html#getDerivedStateFromPropertiesForUrlParametersCore"
            >getDerivedStateFromPropertiesForUrlParametersCore</a
          >
        </li>
        <li>
          <a href="global.html#getFromLocalStorage">getFromLocalStorage</a>
        </li>
        <li>
          <a href="global.html#getFromSessionStorage">getFromSessionStorage</a>
        </li>
        <li><a href="global.html#getQueue">getQueue</a></li>
        <li><a href="global.html#getRouteAuthority">getRouteAuthority</a></li>
        <li><a href="global.html#logLevel">logLevel</a></li>
        <li>
          <a href="global.html#mobileTypeCollection">mobileTypeCollection</a>
        </li>
        <li><a href="global.html#modulePackageName">modulePackageName</a></li>
        <li><a href="global.html#notify">notify</a></li>
        <li><a href="global.html#numeralFormat">numeralFormat</a></li>
        <li><a href="global.html#remoteAction">remoteAction</a></li>
        <li><a href="global.html#removeLocalStorage">removeLocalStorage</a></li>
        <li>
          <a href="global.html#removeSessionStorage">removeSessionStorage</a>
        </li>
        <li>
          <a href="global.html#renderFurtherColorWhenNoCallProcess"
            >renderFurtherColorWhenNoCallProcess</a
          >
        </li>
        <li>
          <a href="global.html#renderFurtherPrefixWhenNoCallProcess"
            >renderFurtherPrefixWhenNoCallProcess</a
          >
        </li>
        <li><a href="global.html#saveToLocalStorage">saveToLocalStorage</a></li>
        <li>
          <a href="global.html#saveToSessionStorage">saveToSessionStorage</a>
        </li>
        <li>
          <a href="global.html#setEasySoftUtilityHandler"
            >setEasySoftUtilityHandler</a
          >
        </li>
        <li>
          <a href="global.html#setLocalStorageHandler"
            >setLocalStorageHandler</a
          >
        </li>
        <li>
          <a href="global.html#setMessageDisplayMonitor"
            >setMessageDisplayMonitor</a
          >
        </li>
        <li>
          <a href="global.html#setNavigationHandler">setNavigationHandler</a>
        </li>
        <li>
          <a href="global.html#setNotificationDisplayMonitor"
            >setNotificationDisplayMonitor</a
          >
        </li>
        <li><a href="global.html#setRequestHandler">setRequestHandler</a></li>
        <li>
          <a href="global.html#setSessionStorageHandler"
            >setSessionStorageHandler</a
          >
        </li>
        <li><a href="global.html#shallowUpdateEqual">shallowUpdateEqual</a></li>
        <li><a href="global.html#showInfoMessage">showInfoMessage</a></li>
        <li><a href="global.html#showWarningMessage">showWarningMessage</a></li>
        <li>
          <a href="global.html#unlimitedWithNumberFlag"
            >unlimitedWithNumberFlag</a
          >
        </li>
        <li>
          <a href="global.html#unlimitedWithStringFlag"
            >unlimitedWithStringFlag</a
          >
        </li>
        <li><a href="global.html#whetherList">whetherList</a></li>
      </ul>
    </nav>

    <div id="main">
      <h1 class="page-title">utils/notificationAssist.js</h1>

      <section>
        <article>
          <pre class="prettyprint source linenums"><code>import {
  checkStringIsNullOrWhiteSpace,
  isNumber,
  logWarn,
  notificationTypeCollection,
  setErrorNotificationDisplayMonitor,
  setInfoNotificationDisplayMonitor,
  setLoadingNotificationDisplayMonitor,
  setOpenNotificationDisplayMonitor,
  setSuccessNotificationDisplayMonitor,
  setWarningNotificationDisplayMonitor,
  setWarnNotificationDisplayMonitor,
} from 'easy-soft-utility';

import { notification } from '../components';

function adjustPlacement(o) {
  const oAdjust = { ...o };

  const { placement = '' } = {
    placement: '',
    ...oAdjust,
  };

  if (checkStringIsNullOrWhiteSpace(placement)) {
    return 'bottomRight';
  }

  return placement;
}

function adjustDuration(o) {
  const oAdjust = { ...o };

  const { duration = 3000 } = {
    duration: 3000,
    ...oAdjust,
  };

  if (!isNumber(duration) || duration &lt;= 0) {
    return 3;
  }

  return duration / 1000;
}

/**
 * 发送通知
 */
export function notify({
  type,
  title = '',
  description = '',
  placement,
  duration = 3000,
  onClose = () => {},
}) {
  const placementAdjust = adjustPlacement({
    placement: placement,
  });

  const durationAdjust = adjustDuration({
    duration: duration,
  });

  if (
    checkStringIsNullOrWhiteSpace(title) &amp;&amp;
    checkStringIsNullOrWhiteSpace(description)
  ) {
    logWarn('ignore send notification, title and description are empty');

    return;
  }

  setTimeout(() => {
    switch (type) {
      case notificationTypeCollection.open: {
        notification.open({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.loading: {
        notification.open({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.info: {
        notification.info({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.warn: {
        notification.warning({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.warning: {
        notification.warning({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.success: {
        notification.success({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      case notificationTypeCollection.error: {
        notification.error({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }

      default: {
        notification.open({
          message: title,
          description,
          placement: placementAdjust,
          duration: durationAdjust,
          onClose,
        });

        break;
      }
    }
  }, 600);
}

function showOpenNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.open,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

function showLoadingNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.loading,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

function showInfoNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.info,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

function showWarnNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.warn,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

function showWarningNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.warning,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

function showSuccessNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.success,
    title,
    description: checkStringIsNullOrWhiteSpace(description)
      ? '操作成功，请进行后续操作。'
      : description,
    placement,
    duration,
    onClose,
  });
}

function showErrorNotification({
  title,
  description = '',
  placement = '',
  duration = 3000,
  onClose = () => {},
}) {
  notify({
    type: notificationTypeCollection.error,
    title,
    description,
    placement,
    duration,
    onClose,
  });
}

/**
 * 设置 NotificationDisplayMonitor 显示处理
 */
export function setNotificationDisplayMonitor() {
  setOpenNotificationDisplayMonitor(showOpenNotification);
  setLoadingNotificationDisplayMonitor(showLoadingNotification);
  setInfoNotificationDisplayMonitor(showInfoNotification);
  setWarnNotificationDisplayMonitor(showWarnNotification);
  setWarningNotificationDisplayMonitor(showWarningNotification);
  setSuccessNotificationDisplayMonitor(showSuccessNotification);
  setErrorNotificationDisplayMonitor(showErrorNotification);
}
</code></pre>
        </article>
      </section>
    </div>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Mon Jun 03
      2024 17:31:00 GMT+0800 (中国标准时间) using the
      <a href="https://github.com/clenemt/docdash">docdash</a> theme.
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/polyfill.js"></script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
