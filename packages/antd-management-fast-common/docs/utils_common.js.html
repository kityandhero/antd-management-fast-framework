<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>utils/common.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css" />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css" />
    <script src="scripts/nav.js" defer></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger" class="navicon-button x">
      <div class="navicon"></div>
    </label>

    <label for="nav-trigger" class="overlay"></label>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Global</h3>
      <ul>
        <li>
          <a href="global.html#FormatMessageWrapper">FormatMessageWrapper</a>
        </li>
        <li>
          <a href="global.html#InteractionAssemble">InteractionAssemble</a>
        </li>
        <li><a href="global.html#TranslateLocale">TranslateLocale</a></li>
        <li><a href="global.html#actionCore">actionCore</a></li>
        <li><a href="global.html#animalType">animalType</a></li>
        <li><a href="global.html#apiRequest">apiRequest</a></li>
        <li><a href="global.html#apiSuccessCode">apiSuccessCode</a></li>
        <li><a href="global.html#appInitDefault">appInitDefault</a></li>
        <li>
          <a href="global.html#authenticationFailCode"
            >authenticationFailCode</a
          >
        </li>
        <li>
          <a href="global.html#buildRandomHexColor">buildRandomHexColor</a>
        </li>
        <li><a href="global.html#cardConfig">cardConfig</a></li>
        <li><a href="global.html#confirmActionCore">confirmActionCore</a></li>
        <li><a href="global.html#copyToClipboard">copyToClipboard</a></li>
        <li><a href="global.html#destroyMessage">destroyMessage</a></li>
        <li><a href="global.html#emptyLogic">emptyLogic</a></li>
        <li><a href="global.html#emptyLogo">emptyLogo</a></li>
        <li><a href="global.html#extraBuildType">extraBuildType</a></li>
        <li><a href="global.html#filterUpdateModel">filterUpdateModel</a></li>
        <li><a href="global.html#flushLocalStorage">flushLocalStorage</a></li>
        <li>
          <a href="global.html#flushSessionStorage">flushSessionStorage</a>
        </li>
        <li><a href="global.html#formatMessage">formatMessage</a></li>
        <li>
          <a href="global.html#getAuthorityFromRouter"
            >getAuthorityFromRouter</a
          >
        </li>
        <li><a href="global.html#getCorsDomain">getCorsDomain</a></li>
        <li>
          <a href="global.html#getDerivedStateFromPropertiesForUrlParameters"
            >getDerivedStateFromPropertiesForUrlParameters</a
          >
        </li>
        <li>
          <a
            href="global.html#getDerivedStateFromPropertiesForUrlParametersCore"
            >getDerivedStateFromPropertiesForUrlParametersCore</a
          >
        </li>
        <li>
          <a href="global.html#getFromLocalStorage">getFromLocalStorage</a>
        </li>
        <li>
          <a href="global.html#getFromSessionStorage">getFromSessionStorage</a>
        </li>
        <li><a href="global.html#getQueue">getQueue</a></li>
        <li><a href="global.html#getRouteAuthority">getRouteAuthority</a></li>
        <li><a href="global.html#logLevel">logLevel</a></li>
        <li>
          <a href="global.html#mobileTypeCollection">mobileTypeCollection</a>
        </li>
        <li><a href="global.html#modulePackageName">modulePackageName</a></li>
        <li><a href="global.html#notify">notify</a></li>
        <li><a href="global.html#numeralFormat">numeralFormat</a></li>
        <li><a href="global.html#remoteAction">remoteAction</a></li>
        <li><a href="global.html#removeLocalStorage">removeLocalStorage</a></li>
        <li>
          <a href="global.html#removeSessionStorage">removeSessionStorage</a>
        </li>
        <li>
          <a href="global.html#renderFurtherColorWhenNoCallProcess"
            >renderFurtherColorWhenNoCallProcess</a
          >
        </li>
        <li>
          <a href="global.html#renderFurtherPrefixWhenNoCallProcess"
            >renderFurtherPrefixWhenNoCallProcess</a
          >
        </li>
        <li><a href="global.html#saveToLocalStorage">saveToLocalStorage</a></li>
        <li>
          <a href="global.html#saveToSessionStorage">saveToSessionStorage</a>
        </li>
        <li>
          <a href="global.html#setEasySoftUtilityHandler"
            >setEasySoftUtilityHandler</a
          >
        </li>
        <li>
          <a href="global.html#setLocalStorageHandler"
            >setLocalStorageHandler</a
          >
        </li>
        <li>
          <a href="global.html#setMessageDisplayMonitor"
            >setMessageDisplayMonitor</a
          >
        </li>
        <li>
          <a href="global.html#setNavigationHandler">setNavigationHandler</a>
        </li>
        <li>
          <a href="global.html#setNotificationDisplayMonitor"
            >setNotificationDisplayMonitor</a
          >
        </li>
        <li><a href="global.html#setRequestHandler">setRequestHandler</a></li>
        <li>
          <a href="global.html#setSessionStorageHandler"
            >setSessionStorageHandler</a
          >
        </li>
        <li><a href="global.html#shallowUpdateEqual">shallowUpdateEqual</a></li>
        <li><a href="global.html#showInfoMessage">showInfoMessage</a></li>
        <li><a href="global.html#showWarningMessage">showWarningMessage</a></li>
        <li>
          <a href="global.html#unlimitedWithNumberFlag"
            >unlimitedWithNumberFlag</a
          >
        </li>
        <li>
          <a href="global.html#unlimitedWithStringFlag"
            >unlimitedWithStringFlag</a
          >
        </li>
        <li><a href="global.html#whetherList">whetherList</a></li>
      </ul>
    </nav>

    <div id="main">
      <h1 class="page-title">utils/common.js</h1>

      <section>
        <article>
          <pre
            class="prettyprint source linenums"
          ><code>import copy from 'copy-to-clipboard';

import {
  checkStringIsNullOrWhiteSpace,
  isEqualBySerialize,
  isFunction,
  showSimpleSuccessMessage,
} from 'easy-soft-utility';

import { getCurrentLocationParameters } from './routeAssist';

/**
 * Reacts生命周期getDerivedStateFromProps 辅助函数用于将url参数解析到返回值中用于设定state.
 * @function
 * @param {Object} nextProperties next properties.
 * @param {Object} previousState previous state.
 * @returns {Object} result object data.
 */
export function getDerivedStateFromPropertiesForUrlParametersCore(
  // eslint-disable-next-line no-unused-vars
  nextProperties,
  // eslint-disable-next-line no-unused-vars
  previousState,
) {
  const parameters = getCurrentLocationParameters();

  return { urlParams: parameters };
}

/**
 * Reacts生命周期getDerivedStateFromProps 辅助函数用于将url参数解析到返回值中用于设定state,如果值重复，则返回null.
 * @function
 * @param {Object} nextProperties next properties.
 * @param {Object} previousState previous state.
 * @param {Object} [defaultUrlParameters=null] default url parameters.
 * @param {Function} [parseUrlParametersForSetState=null] parse url parameters for set state.
 * @returns {Object} result object data.
 */
export function getDerivedStateFromPropertiesForUrlParameters(
  nextProperties,
  previousState,
  defaultUrlParameters = null,
  parseUrlParametersForSetState = null,
) {
  let stateUrlParameters = getDerivedStateFromPropertiesForUrlParametersCore(
    nextProperties,
    previousState,
  );

  stateUrlParameters = {
    urlParams: { id: '' },
    ...defaultUrlParameters,
    ...stateUrlParameters,
  };

  const { urlParams: urlParametersPrevious } = previousState;

  const { urlParams } = stateUrlParameters;

  if (isEqualBySerialize({ ...urlParametersPrevious }, { ...urlParams })) {
    return previousState;
  }

  if (isFunction(parseUrlParametersForSetState)) {
    const data = parseUrlParametersForSetState(stateUrlParameters);

    return { ...previousState, ...stateUrlParameters, ...data };
  }

  return { ...previousState, ...stateUrlParameters };
}

/**
 * copy text to clipboard and show prompt.
 * @function
 * @param {string} text text will copy.
 * @param {boolean} [showCopyText = true] show copy text.
 * @param {string} [otherShowText = ''] show other info text when showCopyText is false and otherShowText is not empty.
 */
export function copyToClipboard(text, showCopyText = true, otherShowText = '') {
  copy(text);

  if (showCopyText) {
    showSimpleSuccessMessage(`已经将 ${text} 复制到剪贴板！`);
  } else if (checkStringIsNullOrWhiteSpace(otherShowText)) {
    showSimpleSuccessMessage('已经复制到剪贴板！');
  } else {
    showSimpleSuccessMessage(`已经将${otherShowText}复制到剪贴板！`);
  }
}
</code></pre>
        </article>
      </section>
    </div>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Mon Jun 03
      2024 17:31:00 GMT+0800 (中国标准时间) using the
      <a href="https://github.com/clenemt/docdash">docdash</a> theme.
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/polyfill.js"></script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
